<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fattyliverscore</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: white;
            font-family: 'Inter', sans-serif;
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            padding: 10px;
        }

        .container {
            width: 100vw;
            max-width: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        /* Background Circle */
        .circle-container {
            position: absolute;
            width: 355px;
            height: 355px;
            top: 0;
            right: 0;
            transform: translate(50%,-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 40px;
            z-index: 1;
        }

        .circle-2 {
            position: absolute;
            top: 0;
            left: 0;
        }

        .circle-1 {
            position: relative;
            z-index: 2;
        }

        .ellipse-2 {
            width: 355px;
            height: 355px;
            background: #D0F4FD;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Score Display */
        ._7 {
            color: #333;
            font: 600 48px/20.13px 'Inter', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .healthy-liver-score {
            color: #4CAF50;
            text-align: center;
            font: 600 40px / 60px 'Inter', sans-serif;
            margin-top: 10px;
            margin-bottom: 10px;
            position: relative;
            z-index: 10;
        }

        /* Risk Slider */
        .risk-slider-container {
            width: 350px;
            padding: 10px;
            margin-bottom: 10px;
            position: relative;
            z-index: 10;
        }

        .risk-slider-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
            font-weight: 600;
            color: #333;
            font: 200 16px/20.13px 'Inter', sans-serif;
        }

        .risk-slider {
            position: relative;
            height: 30px;
            border-radius: 15px;
            overflow: visible;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .slider-track {
            height: 100%;
            display: flex;
        }

        .low-risk {
            background: #4CAF50;
            width: 33.33%;
        }

        .moderate-risk {
            background: #FF9800;
            width: 33.33%;
        }

        .high-risk {
            background: #FF5722;
            width: 33.34%;
        }

        .slider-numbers {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
            margin-top: 5px;
        }

        .you-are-here {
            position: absolute;
            top: 40px;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            white-space: nowrap;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 1000;
            display: block;
            visibility: visible;
        }

        .you-are-here::after {
            content: '';
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-bottom-color: #333;
        }

        /* Success Message */
        .success-message {
            color: #4CAF50;
            text-align: center;
            font: 600 16px/20.13px 'Inter', sans-serif;
            margin-bottom: 10px;
            position: relative;
            z-index: 10;
        }

        /* Website Link */
        .website-link {
            color: #000000;
            text-align: center;
            font: 600 18px/20.13px 'Inter', sans-serif;
            text-decoration: underline;
            margin-bottom: 20px;
            display: block;
        }

        /* Disclaimer */
        .disclaimer {
            color: #6c6d6d;
            text-align: center;
            font: 600 14px/20.13px 'Inter', sans-serif;
            margin-bottom: 20px;
            position: relative;
            z-index: 10;
        }

        /* Logo */
        .logo {
            align-self: flex-end;
            margin-bottom: 20px;
            z-index: 999;
            position: relative;
        }

        .image-2 {
            max-width: 150px;
            height: auto;
        }

        /* Responsive adjustments */
        @media (max-width: 480px) {
            .circle-container {
                width: 300px;
                height: 300px;
            }

            .circle-2, .ellipse-2 {
                width: 300px;
                height: 300px;
            }

            .risk-slider-container {
                width: 300px;
            }

            .success-message {
                font-size: 14px;
            }

            .disclaimer {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">
            <img class="image-2" src="img/image-2-2@2x.png" alt="Logo">
        </div>

        <div class="circle-container">
            <svg class="circle-2" width="355" height="355" viewBox="0 0 355 355" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M354.962 177.481C354.962 275.501 275.501 354.962 177.481 354.962C79.4609 354.962 0 275.501 0 177.481C0 79.4609 79.4609 0 177.481 0C275.501 0 354.962 79.4609 354.962 177.481Z" fill="#D0F4FD"></path>
            </svg>
        </div>

        <div class="healthy-liver-score">
            <div>
                Healthy<br>Liver Score
            </div>
            <div class="circle-1">
                <div class="_7 healthy-liver-score">
                    <span id="lblResult">2</span>
                </div>
            </div>
        </div>

        <div class="risk-slider-container">
            <div class="risk-slider-labels">
                <span>Low Risk</span>
                <span>Moderate Risk</span>
                <span>High Risk</span>
            </div>
            
            <div class="risk-slider">
                <div class="slider-track">
                    <div class="low-risk"></div>
                    <div class="moderate-risk"></div>
                    <div class="high-risk"></div>
                </div>
                
                <div class="you-are-here" id="youAreHere">You are here</div>
            </div>
            
            <div class="slider-numbers">
                <span>0</span>
                <span>4</span>
                <span>8</span>
                <span></span>
            </div>
        </div>

        <div class="success-message">
            Your liver is healthy. We appreciate your commitment to maintaining good liver health. Get in touch with your doctor to know more about Liver Health and how to keep it healthy in the long run.<br>
            <br>For more insights about liver health,<br>
            visit our <a class="website-link" href="https://ayushmanliver.com/">Ayushman liver website.</a>
        </div>

        <div class="disclaimer">
            Note: This risk assessment tool is not intended as medical advice or to suggest treatment.<br>
            The study investigators recommend that you consult your physician or other healthcare professional for advice.
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        function updateSlider(score) {
            let position = Math.min(Math.max(score / 15 * 100, 0), 100);
            $('#youAreHere').css('left', position + '%');
        }

        $(document).ready(function() {
            let score = 2; // Default fallback value
            
            // First priority: Check localStorage for the calculated score
            const storedData = localStorage.getItem('dataObject');
            if (storedData) {
                try {
                    const parsedData = JSON.parse(storedData);
                    if (parsedData.Total !== undefined && parsedData.Total !== null) {
                        score = parsedData.Total;
                        console.log("Score from localStorage:", score);
                    }
                } catch (e) {
                    console.error("Error parsing localStorage data:", e);
                }
            }
            
            // Second priority: Check URL parameters (override localStorage if present)
            const urlParams = new URLSearchParams(window.location.search);
            const urlScore = urlParams.get('score');
            if (urlScore) {
                score = parseInt(urlScore);
                console.log("Score from URL (overriding localStorage):", score);
            }
            
            // Update the display
            $("#lblResult").text(score);
            updateSlider(score);
            
            console.log("Final score displayed:", score);
        });
    </script>
</body>
</html>